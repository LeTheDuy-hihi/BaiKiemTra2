@page
@model IndexModel
@{
    ViewData["Title"] = "Trang Chủ";
}

<div class="hero-section text-white text-center py-5">
    <div class="container">
        <h1 class="display-4 fw-bold mb-4">
            <i class="fas fa-table-tennis"></i> Chào Mừng Đến Với Vợt Thủ Phố Núi
        </h1>
        <p class="lead fs-5 mb-4">Nền tảng quản lý sân pickleball hàng đầu - Tìm kèo, đặt sân, quản lý tài chính</p>

        @if (!User.Identity?.IsAuthenticated == true)
        {
            <div>
                <a href="/Account/Register" class="btn btn-light btn-lg me-3 mb-3">
                    <i class="fas fa-user-plus"></i> Đăng Ký Ngay
                </a>
                <a href="/Account/Login" class="btn btn-outline-light btn-lg mb-3">
                    <i class="fas fa-sign-in-alt"></i> Đăng Nhập
                </a>
            </div>
        }
    </div>
</div>

<div class="container mb-5">
    <div class="row g-4">
        <div class="col-md-3">
            <div class="icon-box">
                <i class="fas fa-search-plus"></i>
                <h5>Tìm Kèo</h5>
                <p class="text-muted">Tìm kiếm các cuộc thi đấu phù hợp với bạn</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="icon-box">
                <i class="fas fa-calendar-alt"></i>
                <h5>Đặt Sân</h5>
                <p class="text-muted">Đặt sân pickleball dễ dàng và nhanh chóng</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="icon-box">
                <i class="fas fa-chart-line"></i>
                <h5>Thống Kê</h5>
                <p class="text-muted">Theo dõi thành tích và xếp hạng của bạn</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="icon-box">
                <i class="fas fa-wallet"></i>
                <h5>Quản Lý Tài Chính</h5>
                <p class="text-muted">Quản lý chi phí và thanh toán dễ dàng</p>
            </div>
        </div>
    </div>
</div>

<!-- Featured News Section -->
@if (Model?.FeaturedNews?.Count > 0)
{
    <div class="container mb-5">
        <h2 class="mb-4" style="color: #2C3E50; border-bottom: 3px solid #E74C3C; padding-bottom: 10px;">
            📰 Tin Tức Nổi Bật
        </h2>
        <div class="row g-4">
            @foreach (var news in Model.FeaturedNews)
            {
                <div class="col-md-4">
                    <div class="card border-0 h-100">
                        <div class="card-body">
                            @if (news.IsPinned)
                            {
                                <span class="badge bg-danger mb-2">📌 GHI MN</span>
                            }
                            <div class="text-muted small mb-2">📅 @news.CreatedDate.ToString("dd/MM/yyyy")</div>
                            <h5 class="card-title">@news.Title</h5>
                            <p class="card-text text-muted">
                                @(news.Content?.Length > 100 ? news.Content.Substring(0, 100) + "..." : news.Content)
                            </p>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
}

<!-- Top Members Ranking -->
@if (Model?.TopMembers?.Count > 0)
{
    <div class="container mb-5">
        <h2 class="mb-4" style="color: #2C3E50; border-bottom: 3px solid #E74C3C; padding-bottom: 10px;">
            🏅 Top Thành Viên
        </h2>
        <div class="card border-0">
            <div class="table-responsive">
                <table class="table table-hover mb-0">
                    <tbody>
                        @{
                            int rank = 1;
                            @foreach (var member in Model.TopMembers)
                            {
                                <tr>
                                    <td style="width: 60px; font-size: 1.3rem; font-weight: 700;">
                                        @if (rank == 1)
                                        {
                                            <span style="color: #FFD700;">🥇</span>
                                        }
                                        else if (rank == 2)
                                        {
                                            <span style="color: #C0C0C0;">🥈</span>
                                        }
                                        else if (rank == 3)
                                        {
                                            <span style="color: #CD7F32;">🥉</span>
                                        }
                                        else
                                        {
                                            <span>#@rank</span>
                                        }
                                    </td>
                                    <td>
                                        <div style="font-weight: 700; color: #2C3E50;">@member.FullName</div>
                                        <div style="font-size: 0.85rem; color: #999;">@member.Status</div>
                                    </td>
                                    <td style="text-align: right;">
                                        <div style="font-size: 1.3rem; font-weight: 700; color: #E74C3C;">
                                            @member.RankLevel.ToString("F1")
                                        </div>
                                    </td>
                                </tr>
                                rank++;
                                if (rank > 5) break;
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
}

@if (User.Identity?.IsAuthenticated == true)
{
    <div class="container">
        <div class="row g-4">
            @if (User.IsInRole("Admin"))
            {
                <div class="col-md-6 col-lg-4">
                    <div class="card border-0">
                        <div class="card-body text-center">
                            <i class="fas fa-chart-bar text-danger" style="font-size: 3rem;"></i>
                            <h5 class="card-title mt-3">Nhập Kết Quả</h5>
                            <p class="card-text text-muted">Cập nhật kết quả các trận đấu</p>
                            <a href="/Matches/Create" class="btn btn-primary">Vào Trang</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card border-0">
                        <div class="card-body text-center">
                            <i class="fas fa-list text-info" style="font-size: 3rem;"></i>
                            <h5 class="card-title mt-3">Quản Lý Kèo</h5>
                            <p class="card-text text-muted">Quản lý các cuộc thi đấu</p>
                            <a href="/Challenges/Manage" class="btn btn-primary">Vào Trang</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card border-0">
                        <div class="card-body text-center">
                            <i class="fas fa-money-bill text-success" style="font-size: 3rem;"></i>
                            <h5 class="card-title mt-3">Tài Chính</h5>
                            <p class="card-text text-muted">Quản lý doanh thu và chi phí</p>
                            <a href="/Financial/Index" class="btn btn-primary">Vào Trang</a>
                        </div>
                    </div>
                </div>
            }
            else
            {
                <div class="col-md-6 col-lg-3">
                    <div class="card border-0">
                        <div class="card-body text-center">
                            <i class="fas fa-crossed-swords text-warning" style="font-size: 3rem;"></i>
                            <h5 class="card-title mt-3">Tìm Kèo</h5>
                            <p class="card-text text-muted">Tìm đối thủ phù hợp</p>
                            <a href="/Challenges" class="btn btn-primary">Khám Phá</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="card border-0">
                        <div class="card-body text-center">
                            <i class="fas fa-calendar-check text-info" style="font-size: 3rem;"></i>
                            <h5 class="card-title mt-3">Đặt Sân</h5>
                            <p class="card-text text-muted">Đặt sân ngay</p>
                            <a href="/Bookings/Create" class="btn btn-primary">Đặt Ngay</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="card border-0">
                        <div class="card-body text-center">
                            <i class="fas fa-history text-secondary" style="font-size: 3rem;"></i>
                            <h5 class="card-title mt-3">Lịch Sử</h5>
                            <p class="card-text text-muted">Xem lịch sử trận đấu</p>
                            <a href="/Matches/History" class="btn btn-primary">Xem Lịch Sử</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="card border-0">
                        <div class="card-body text-center">
                            <i class="fas fa-user-tie text-success" style="font-size: 3rem;"></i>
                            <h5 class="card-title mt-3">Hồ Sơ</h5>
                            <p class="card-text text-muted">Xem hồ sơ cá nhân</p>
                            <a href="/Profile" class="btn btn-primary">Xem Hồ Sơ</a>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
}